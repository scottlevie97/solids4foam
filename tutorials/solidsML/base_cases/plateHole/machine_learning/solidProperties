/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | foam-extend: Open Source CFD                    |
|  \\    /   O peration     | Version:     3.2                                |
|   \\  /    A nd           | Web:         http://www.foam-extend.org         |
|    \\/     M anipulation  | For copyright notice see file Copyright         |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "constant";
    object      solidProperties;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

// linearGeometry: assumes small strains and rotations
solidModel     linearGeometryTotalDisplacementML;
//solidModel     unsLinearGeometry;

"linearGeometryTotalDisplacementMLCoeffs|linearGeometryTotalDisplacementMLCoeffs|unsLinearGeometryCoeffs"
{
    // Write  residual file
    residualFile yes;

    // Predict displacement
    machineLearning yes;

    // Write time for each iteration
    iterationTimeFile yes;

    // Predict displacement in the z-direction
    predictZ no;    

    jsonFile "../../machine_learning/ML_model/fdeep_model.json";

	iterationToApplyMachineLearningPredictor 20; 

    kerasScalingMeans
    (
		(4.0621747962748535e-07		0.0		0.0)
		(4.2187874564343663e-07		-1.4099432464535473e-07		0.0)
		(4.996843084869749e-07		-1.4125345287008386e-07		0.0)
		(5.066148266057387e-07		-1.7627557074265452e-07		0.0)
		(5.261128773742356e-07		-1.7984149306856381e-07		0.0)
		(5.305793738197727e-07		-1.9021955808833802e-07		0.0)
		(5.376218432585787e-07		-1.9380447997957367e-07		0.0)
		(5.411385448636893e-07		-1.9868641045071742e-07		0.0)
		(5.450062148914215e-07		-2.0177652173264406e-07		0.0)
		(5.478424266187989e-07		-2.0495433483963148e-07		0.0)
		(5.50586610715683e-07		-2.0749402051827583e-07		0.0)
		(5.528536435616793e-07		-2.099457790531507e-07		0.0)
		(5.550521731729653e-07		-2.120633815819355e-07		0.0)
		(5.569948502119061e-07		-2.1402011627811652e-07		0.0)
		(5.587333529666794e-07		-2.1579208756870533e-07		0.0)
		(5.6033755315232e-07		-2.1737968855979922e-07		0.0)
		(5.617776187157582e-07		-2.188539048150154e-07		0.0)
		(5.63104778420486e-07		-2.20165443002267e-07		0.0)
		(5.642984563702986e-07		-2.2136977872447354e-07		0.0)
		(5.654182646129173e-07		-2.2246340436465232e-07		0.0)
		(5.782528163008814e-07		-2.353110712140345e-07		0.0)
    );

    kerasScalingStds
    (
		(2.0631066630656132e-07		1.0		1.0)
		(2.1387181907736413e-07		8.819624938325618e-08		1.0)
		(2.553305264004711e-07		8.962582490264676e-08		1.0)
		(2.59389702576966e-07		1.0857578569218227e-07		1.0)
		(2.7054807185199014e-07		1.1082536719595106e-07		1.0)
		(2.737766192357596e-07		1.1679723236855174e-07		1.0)
		(2.784483687928801e-07		1.1930604379726954e-07		1.0)
		(2.8126568607518513e-07		1.2269661937671655e-07		1.0)
		(2.842496495873646e-07		1.252395369543349e-07		1.0)
		(2.8667998905907365e-07		1.279206265560838e-07		1.0)
		(2.890273630247022e-07		1.3030592091775274e-07		1.0)
		(2.9109081141605986e-07		1.326748951785964e-07		1.0)
		(2.930837237997698e-07		1.3486320297726458e-07		1.0)
		(2.9490100251005704e-07		1.3693889194429132e-07		1.0)
		(2.9656602572394063e-07		1.3888682176061166e-07		1.0)
		(2.981160724471201e-07		1.406998292062613e-07		1.0)
		(2.995397963757726e-07		1.4241236257547006e-07		1.0)
		(3.008624181281769e-07		1.4399630414264102e-07		1.0)
		(3.020793336873775e-07		1.4547769859532656e-07		1.0)
		(3.0322177245372416e-07		1.468561484795316e-07		1.0)
		(3.1742148106781136e-07		1.6468540756767424e-07		1.0)
    );


    // Maximum number of momentum correctors
    nCorrectors     1000;

    // Solution tolerance for displacement
    solutionTolerance 1e-10;

    // Alternative solution tolerance for displacement
    alternativeTolerance 1e-10;

    // Material law solution tolerance
    materialTolerance 1e-05;

    // Write frequency for the residuals
    infoFrequency   100;
}


// ************************************************************************* //
